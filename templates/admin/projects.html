{% extends "_layouts/dashboard.html" %}
{% set active_page = "admin" %}
{% set active_link = "featured" %}
{% import "_helpers/_card.html" as card_helpers %}
{% import "_helpers/_table.html" as table_helpers %}
{% import "_helpers/_admin.html" as admin_helpers %}

{% block content %}

{{ admin_helpers.render_title('Featured Projects') }}

<div class="d-flex flex-row align-items-center justify-content-center">
    <span class="fa fa-chevron-left mr-2 btn-scroll" data-target="#categories-strip" data-direction="left" role="button"></span>
    <div id="categories-strip" class="card-strip">
        {%- for c in categories %}
            {{ card_helpers.render_icon_button(c.name, '#{0}'.format(c.short_name), icon=c.short_name, tooltip=c.description, active=loop.first) }}
        {%- endfor %}
    </div>
    <span class="fa fa-chevron-right ml-2 btn-scroll" data-target="#categories-strip" data-direction="right" role="button"></span>
</div>

<div class="card my-4">
    {{ card_helpers.render_title('Projects', 'Feature a project on the home page', search_table="#featured-table") }}
    <div>
        {% for c in categories %}
        <div id="{{ c.short_name }}" {% if not loop.first %}style="display: none;"{% endif %}>
            {% if projects[c.short_name] %}
            <div class="table-responsive">
                <table id="featured-table" class="table table-hover table-striped mb-0">
                    {{ table_helpers.render_head(['Name', 'Progress', 'Featured']) }}
                    <tbody>
                        {% for p in projects[c.short_name] %}
                        {{ table_helpers.render_row([p.name, p.overall_progress, '<a href="#" class="project-toggle-featured btn btn-sm btn-outline-primary" data-project-id="{0}" data-featured="{1}">{1}</a>'.format(p.id, p.featured == True)]) }}
                         {% endfor %}
                         <tr class="text-center">
                            <td class="lead text-center" colspan="3">There are no projects in this category.</td>
                         </tr>
                    </tbody>
                </table>
            </div>
            {% else %}
            <hr>
            <p class="lead text-center">There are no projects in this category.</p>
            {% endif %}
        </div>
        {% endfor %}
    </div>
</div>

{% endblock %}
