{% extends "_layouts/dashboard.html" %}
{% set active_page = "admin" %}
{% set active_link = "administrators" %}
{% import "_helpers/_admin.html" as admin_helpers %}
{% import "_helpers/_form.html" as form_helpers %}
{% import "_helpers/_card.html" as card_helpers %}
{% import "_helpers/_table.html" as table_helpers %}

{% block content %}

{{ admin_helpers.render_title('Administrators') }}

<div class="card my-4">
    {{ card_helpers.render_title('Current Administrators', 'Look what the cat dragged in') }}
    <div class="card-block pt-1">
    </div>
</div>

<div class="card my-4">
    {{ card_helpers.render_title('Users', 'The hoi polloi') }}
    <div class="card-block">
        <form method="POST">
            {{ form.hidden_tag() }}
            {{ form_helpers.render_field(form.user, placeholder="Search users", show_label=False, class="form-control rounded-oblong", required="true") }}
            <div class="text-right">
                <input id="submit" type="submit" value="Search" class="btn btn-success" role="button" />
            </div>
        </form>
    </div>
    {% if found %}
    <div class="table-responsive">
        <table id="featured-table" class="table table-hover table-striped mb-0">
            {{ table_helpers.render_head(['ID', 'Name', 'Administrator']) }}
            <tbody>
                {% for user in found %}
                {{ table_helpers.render_row([user.id, user.fullname, '<a href="{0}" class="btn btn-sm btn-outline-primary">{1}</a>'.format(url_for('admin.add_admin', user_id=user.id), user.admin)]) }}
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <hr class="w-100 mt-2">
    <p class="lead text-center">No results</p>
    {% endif %}
</div>

{% endblock %}
