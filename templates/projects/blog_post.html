{% extends "_layouts/default.html" %}
{% set active_page = "projects" %}
{% import "_helpers/_project.html" as project_helpers %}

{% block content %}
<div class="container mb-5 pt-4">
    <article>
        <header>
            <h2>{{ blogpost.title }}</h2>
            <p>
                <em>Author: {{ blogpost.owner.name }}</em>
            </p>
            <p>
                <em>Written: {{ blogpost.created[0:10] }}</em>
            </p>
            <p>
                <a href="{{ url_for('project.show_blogposts', short_name=project.short_name )}}" class="btn btn-sm btn-secondary" role="button">Back</a>
            </p>
        </header>
        <body>
            <p>{{ blogpost.body | e | markdown }}</p>
        </body>
    </article>

    {% if current_user.is_authenticated() and current_user.id == project.owner_id or current_user.admin %}
    <form method="POST" action="{{ url_for('project.delete_blogpost', short_name=project.short_name, id=blogpost.id) }}" onsubmit="return confirm('Do you really want to delete the blog post?');">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
        <div class="text-right">
            <input type="submit" value=Delete class="btn btn-secondary" />
            <a href="{{ url_for('project.update_blogpost', short_name=project.short_name, id=blogpost.id) }}" class="btn btn-primary">Edit</a>
        </div>
    </form>
    {% endif %}
</div>

{% endblock %}