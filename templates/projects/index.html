{% extends "_layouts/default.html" %}
{% set active_page = "projects" %}
{% import "_helpers/_project.html" as project_helpers %}
{% import "_helpers/_card.html" as card_helpers %}

{% block content %}

{% set project_icons = {'featured': 'fa-star-o', 'draft': 'fa-question', 'convert-a-card': 'fa-refresh', 'lcp': 'fa-refresh'} %}

<section class="bg-faded py-5">
    <div class="container">
        <div class="row d-flex flex-row justify-content-center">
            {% for c in categories %}
            {{ card_helpers.render_strip_item(c.name, url_for('project.project_cat_index', category=c.short_name), project_icons.get(c.short_name, ''), active_cat.short_name==c.short_name, c.description) }}
            {% endfor %}
            {% if current_user.is_authenticated() and current_user.admin %}
            {{ card_helpers.render_strip_item('Draft', url_for('project.draft'), project_icons.get('draft', ''), active_cat.short_name=='draft', 'Unpublished projects') }}
            {% endif %}
    </div>
</section>

<section class="">
    <div class="container">
        {% if projects %}
            {{ project_helpers.render_project_deck(projects) }}
            {% if pagination.pages > 1 %}
                {{ project_helpers.render_pagination(pagination) }}
            {% endif %}
        {% else %}
            <p class="lead">Sorry, there are no published projects for this category yet.</p>
        {% endif %}
    </div>
</section>
{% endblock %}